<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="silence_.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:silence_"
    xmlns:tb="using:H.NotifyIcon"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="silence!">

    <Grid Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Custom Title Bar -->
        <Grid x:Name="AppTitleBar" Grid.Row="0" Background="Transparent">
            <StackPanel Orientation="Horizontal" 
                        VerticalAlignment="Center" 
                        Margin="16,0,0,0"
                        Spacing="8">
                <Image x:Name="AppIcon" 
                       Source="Assets/app.png" 
                       Width="16" 
                       Height="16"
                       VerticalAlignment="Center"/>
                <TextBlock Text="silence!" 
                           VerticalAlignment="Center"
                           FontSize="12"
                           Opacity="0.8"/>
            </StackPanel>
        </Grid>
        
        <!-- NavigationView -->
        <NavigationView x:Name="NavView"
                        Grid.Row="1"
                        IsBackButtonVisible="Collapsed"
                        IsSettingsVisible="False"
                        PaneDisplayMode="Left"
                        OpenPaneLength="200"
                        IsPaneToggleButtonVisible="True"
                        Background="Transparent"
                        PaneOpening="NavView_PaneOpening"
                        PaneClosing="NavView_PaneClosing"
                        SelectionChanged="NavView_SelectionChanged">
            
            <NavigationView.Resources>
                <!-- Make NavigationView pane transparent for Mica -->
                <SolidColorBrush x:Key="NavigationViewContentBackground" Color="Transparent"/>
                <SolidColorBrush x:Key="NavigationViewContentGridBorderBrush" Color="Transparent"/>
                
                <!-- Enable smooth pane animations -->
                <x:Double x:Key="NavigationViewPaneAnimationDuration">250</x:Double>
            </NavigationView.Resources>
            
            <NavigationView.MenuItems>
                <NavigationViewItem x:Name="GeneralNavItem" Content="General" Tag="General" IsSelected="True">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE713;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem x:Name="AppearanceNavItem" Content="Appearance" Tag="Appearance">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE790;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem x:Name="AboutNavItem" Content="About" Tag="About">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE946;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>
            
            <NavigationView.FooterMenuItems>
                <NavigationViewItem Content="v1.0.0" SelectsOnInvoked="False" IsEnabled="False">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE7C1;" Opacity="0.5"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.FooterMenuItems>
            
            <!-- Content area with semi-transparent card background like Blip -->
            <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1,0,0,0"
                    CornerRadius="8,0,0,0">
                <Frame x:Name="ContentFrame" Background="Transparent">
                    <Frame.ContentTransitions>
                        <TransitionCollection>
                            <NavigationThemeTransition>
                                <NavigationThemeTransition.DefaultNavigationTransitionInfo>
                                    <SlideNavigationTransitionInfo Effect="FromRight"/>
                                </NavigationThemeTransition.DefaultNavigationTransitionInfo>
                            </NavigationThemeTransition>
                        </TransitionCollection>
                    </Frame.ContentTransitions>
                </Frame>
            </Border>
        </NavigationView>
    </Grid>
</Window>
